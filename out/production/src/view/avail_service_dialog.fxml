<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<ScrollPane xmlns="http://javafx.com/javafx/8.0.171"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="app.controller.AvailServiceDialogController"
            fitToWidth="true"
            style="-fx-background: #f5f7fa; -fx-background-color: #f5f7fa;">

    <VBox spacing="18"
          style="-fx-background-color: #f5f7fa; -fx-padding: 20;">

        <!-- Header -->
        <VBox alignment="CENTER" spacing="10"
              style="-fx-background-color: linear-gradient(to right, #667eea 0%, #764ba2 100%); -fx-background-radius: 15; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 12, 0, 0, 3);">
            <Text text="ðŸ’Š" style="-fx-font-size: 48;"/>
            <Text text="Avail Health Service"
                  style="-fx-font-size: 26; -fx-font-weight: bold; -fx-fill: white;"/>
            <Text text="Complete this transaction in 4 simple steps"
                  style="-fx-font-size: 14; -fx-fill: #e0e7ff;"/>
        </VBox>

        <!-- Step 1: Select Resident -->
        <VBox spacing="15"
              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 10, 0, 0, 2);">

            <HBox alignment="CENTER_LEFT" spacing="12">
                <StackPane style="-fx-background-color: #3b82f6; -fx-background-radius: 25; -fx-min-width: 40; -fx-min-height: 40; -fx-max-width: 40; -fx-max-height: 40;">
                    <Text text="1" style="-fx-font-size: 20; -fx-font-weight: bold; -fx-fill: white;"/>
                </StackPane>
                <VBox>
                    <Text text="Select Resident" style="-fx-font-size: 17; -fx-font-weight: bold; -fx-fill: #1f2937;"/>
                    <Text text="Search and select the patient" style="-fx-font-size: 12; -fx-fill: #6b7280;"/>
                </VBox>
            </HBox>

            <HBox spacing="10" alignment="CENTER_LEFT">
                <TextField fx:id="txtSearchResident" promptText="ðŸ” Type name or ID to search..."
                           HBox.hgrow="ALWAYS" prefHeight="38"
                           style="-fx-font-size: 14; -fx-padding: 8 12; -fx-background-radius: 8; -fx-border-color: #e5e7eb; -fx-border-radius: 8; -fx-border-width: 1.5;"/>
                <Button text="Search" onAction="#handleSearchResident" prefWidth="90" prefHeight="38"
                        style="-fx-background-color: #3b82f6; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-cursor: hand;"/>
            </HBox>

            <TableView fx:id="tableResidents" prefHeight="160"
                       style="-fx-background-radius: 8; -fx-border-radius: 8; -fx-border-color: #e5e7eb;">
                <columns>
                    <TableColumn fx:id="colResidentId" text="ID" prefWidth="60"/>
                    <TableColumn fx:id="colResidentName" text="Full Name" prefWidth="180"/>
                    <TableColumn fx:id="colAge" text="Age" prefWidth="60"/>
                    <TableColumn fx:id="colSex" text="Sex" prefWidth="50"/>
                    <TableColumn fx:id="colContact" text="Contact Number" prefWidth="130"/>
                </columns>
            </TableView>

            <Label fx:id="lblSelectedResident" text="No resident selected"
                   style="-fx-text-fill: #9ca3af; -fx-font-size: 13; -fx-font-style: italic; -fx-padding: 5 0 0 0;"/>
        </VBox>

        <!-- Step 2: Select Service -->
        <VBox spacing="15"
              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 10, 0, 0, 2);">

            <HBox alignment="CENTER_LEFT" spacing="12">
                <StackPane style="-fx-background-color: #10b981; -fx-background-radius: 25; -fx-min-width: 40; -fx-min-height: 40; -fx-max-width: 40; -fx-max-height: 40;">
                    <Text text="2" style="-fx-font-size: 20; -fx-font-weight: bold; -fx-fill: white;"/>
                </StackPane>
                <VBox>
                    <Text text="Select Health Service" style="-fx-font-size: 17; -fx-font-weight: bold; -fx-fill: #1f2937;"/>
                    <Text text="Choose the type of service needed" style="-fx-font-size: 12; -fx-fill: #6b7280;"/>
                </VBox>
            </HBox>

            <HBox spacing="20" alignment="CENTER_LEFT">
                <VBox spacing="8" HBox.hgrow="ALWAYS">
                    <Label text="Service Type" style="-fx-font-size: 13; -fx-text-fill: #6b7280; -fx-font-weight: 600;"/>
                    <ComboBox fx:id="comboService" promptText="Select a health service..." prefWidth="380" prefHeight="38"
                              style="-fx-font-size: 14;"/>
                </VBox>

                <VBox spacing="8" alignment="CENTER_RIGHT">
                    <Label text="Service Fee" style="-fx-font-size: 13; -fx-text-fill: #6b7280; -fx-font-weight: 600;"/>
                    <HBox alignment="CENTER_RIGHT">
                        <Label fx:id="lblServiceFee" text="â‚±0.00"
                               style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #10b981;"/>
                    </HBox>
                </VBox>
            </HBox>
        </VBox>

        <!-- Step 3: Assign Personnel -->
        <VBox spacing="15"
              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 10, 0, 0, 2);">

            <HBox alignment="CENTER_LEFT" spacing="12">
                <StackPane style="-fx-background-color: #f59e0b; -fx-background-radius: 25; -fx-min-width: 40; -fx-min-height: 40; -fx-max-width: 40; -fx-max-height: 40;">
                    <Text text="3" style="-fx-font-size: 20; -fx-font-weight: bold; -fx-fill: white;"/>
                </StackPane>
                <VBox>
                    <Text text="Assign Health Personnel" style="-fx-font-size: 17; -fx-font-weight: bold; -fx-fill: #1f2937;"/>
                    <Text text="Select the attending healthcare provider" style="-fx-font-size: 12; -fx-fill: #6b7280;"/>
                </VBox>
            </HBox>

            <VBox spacing="8">
                <Label text="Attending Personnel" style="-fx-font-size: 13; -fx-text-fill: #6b7280; -fx-font-weight: 600;"/>
                <ComboBox fx:id="comboPersonnel" promptText="Choose healthcare personnel..." prefWidth="500" prefHeight="38"
                          style="-fx-font-size: 14;"/>
            </VBox>
        </VBox>

        <!-- Step 4: Additional Information -->
        <VBox spacing="15"
              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 10, 0, 0, 2);">

            <HBox alignment="CENTER_LEFT" spacing="12">
                <StackPane style="-fx-background-color: #8b5cf6; -fx-background-radius: 25; -fx-min-width: 40; -fx-min-height: 40; -fx-max-width: 40; -fx-max-height: 40;">
                    <Text text="4" style="-fx-font-size: 20; -fx-font-weight: bold; -fx-fill: white;"/>
                </StackPane>
                <VBox>
                    <Text text="Additional Information" style="-fx-font-size: 17; -fx-font-weight: bold; -fx-fill: #1f2937;"/>
                    <Text text="Add date and remarks" style="-fx-font-size: 12; -fx-fill: #6b7280;"/>
                </VBox>
            </HBox>

            <HBox spacing="20">
                <VBox spacing="8" prefWidth="200">
                    <Label text="Date of Service" style="-fx-font-size: 13; -fx-text-fill: #6b7280; -fx-font-weight: 600;"/>
                    <DatePicker fx:id="dateProvided" prefHeight="38"
                                style="-fx-font-size: 14;"/>
                </VBox>

                <VBox spacing="8" HBox.hgrow="ALWAYS">
                    <Label text="Remarks (Optional)" style="-fx-font-size: 13; -fx-text-fill: #6b7280; -fx-font-weight: 600;"/>
                    <TextArea fx:id="txtRemarks" promptText="Enter any additional notes or observations..."
                              prefHeight="100" wrapText="true"
                              style="-fx-font-size: 14; -fx-background-radius: 8; -fx-border-color: #e5e7eb; -fx-border-radius: 8;"/>
                </VBox>
            </HBox>
        </VBox>

        <!-- Status Message -->
        <Label fx:id="lblStatus" visible="false"
               style="-fx-font-weight: bold; -fx-font-size: 14; -fx-padding: 12; -fx-background-radius: 8;"/>

        <!-- Action Buttons -->
        <HBox spacing="12" alignment="CENTER" style="-fx-padding: 10 0 20 0;">
            <Button text="âœ“ Complete Transaction" onAction="#handleCompleteTransaction"
                    prefWidth="220" prefHeight="48"
                    style="-fx-background-color: #10b981; -fx-text-fill: white; -fx-font-size: 15; -fx-font-weight: bold; -fx-background-radius: 10; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(16,185,129,0.4), 8, 0, 0, 2);"/>
            <Button text="âœ– Cancel" onAction="#handleCancel"
                    prefWidth="120" prefHeight="48"
                    style="-fx-background-color: #6b7280; -fx-text-fill: white; -fx-font-size: 15; -fx-font-weight: bold; -fx-background-radius: 10; -fx-cursor: hand;"/>
        </HBox>

    </VBox>
</ScrollPane>
