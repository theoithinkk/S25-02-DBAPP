<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<VBox xmlns="http://javafx.com/javafx/8.0.171"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="app.controller.ReportsController"
      spacing="20" style="-fx-padding: 20;">

    <Text text="Generate Reports"
          style="-fx-font-size: 20; -fx-font-weight: bold; -fx-fill: #2c3e50;"/>

    <Text text="Select a report type to generate and export"
          style="-fx-font-size: 12; -fx-fill: #7f8c8d;"/>

    <Separator/>

    <!-- Report Buttons Grid -->
    <GridPane hgap="20" vgap="20">

        <!-- Health Service Issuance Report -->
        <VBox alignment="CENTER" spacing="10" GridPane.columnIndex="0" GridPane.rowIndex="0"
              style="-fx-border-color: #95a5a6; -fx-border-width: 2; -fx-border-radius: 10; -fx-background-radius: 10; -fx-padding: 20;"
              prefWidth="250" prefHeight="180">
            <Text text="ðŸ’Š" style="-fx-font-size: 36;"/>
            <Text text="Health Service Issuance Report"
                  style="-fx-font-size: 13; -fx-font-weight: bold; -fx-text-alignment: center;"
                  wrappingWidth="200"/>
            <Text text="Total and average health services availed per month"
                  style="-fx-font-size: 10; -fx-fill: #7f8c8d; -fx-text-alignment: center;"
                  wrappingWidth="200"/>
            <Button text="Generate Report" onAction="#handleHealthServiceReport"
                    style="-fx-background-color: #95a5a6; -fx-text-fill: white;"/>
            <Text text="â³ To be implemented" style="-fx-fill: #95a5a6; -fx-font-size: 9;"/>
        </VBox>

        <!-- Medical Supply Issuance Report -->
        <VBox alignment="CENTER" spacing="10" GridPane.columnIndex="1" GridPane.rowIndex="0"
              style="-fx-border-color: #27ae60; -fx-border-width: 2; -fx-border-radius: 10; -fx-background-radius: 10; -fx-padding: 20;"
              prefWidth="250" prefHeight="180">
            <Text text="ðŸ“¦" style="-fx-font-size: 36;"/>
            <Text text="Medical Supply Issuance Report"
                  style="-fx-font-size: 13; -fx-font-weight: bold; -fx-text-alignment: center;"
                  wrappingWidth="200"/>
            <Text text="Total and average transactions on medical supplies"
                  style="-fx-font-size: 10; -fx-fill: #7f8c8d; -fx-text-alignment: center;"
                  wrappingWidth="200"/>
            <Button text="Generate Report" onAction="#handleMedicalSupplyReport"
                    style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold;"/>
            <Text text="âœ“ Implemented" style="-fx-fill: #27ae60; -fx-font-size: 9; -fx-font-weight: bold;"/>
        </VBox>

        <!-- Health Personnel Performance Report -->
        <VBox alignment="CENTER" spacing="10" GridPane.columnIndex="0" GridPane.rowIndex="1"
              style="-fx-border-color: #95a5a6; -fx-border-width: 2; -fx-border-radius: 10; -fx-background-radius: 10; -fx-padding: 20;"
              prefWidth="250" prefHeight="180">
            <Text text="ðŸ‘¨â€âš•ï¸" style="-fx-font-size: 36;"/>
            <Text text="Health Personnel Performance Report"
                  style="-fx-font-size: 13; -fx-font-weight: bold; -fx-text-alignment: center;"
                  wrappingWidth="200"/>
            <Text text="Total residents attended per health worker"
                  style="-fx-font-size: 10; -fx-fill: #7f8c8d; -fx-text-alignment: center;"
                  wrappingWidth="200"/>
            <Button text="Generate Report" onAction="#handlePersonnelPerformanceReport"
                    style="-fx-background-color: #95a5a6; -fx-text-fill: white;"/>
            <Text text="â³ To be implemented" style="-fx-fill: #95a5a6; -fx-font-size: 9;"/>
        </VBox>

        <!-- Clinic Visits Report -->
        <VBox alignment="CENTER" spacing="10" GridPane.columnIndex="1" GridPane.rowIndex="1"
              style="-fx-border-color: #95a5a6; -fx-border-width: 2; -fx-border-radius: 10; -fx-background-radius: 10; -fx-padding: 20;"
              prefWidth="250" prefHeight="180">
            <Text text="ðŸ¥" style="-fx-font-size: 36;"/>
            <Text text="Clinic Visits Report"
                  style="-fx-font-size: 13; -fx-font-weight: bold; -fx-text-alignment: center;"
                  wrappingWidth="200"/>
            <Text text="Total visits per month/year by service type"
                  style="-fx-font-size: 10; -fx-fill: #7f8c8d; -fx-text-alignment: center;"
                  wrappingWidth="200"/>
            <Button text="Generate Report" onAction="#handleClinicVisitsReport"
                    style="-fx-background-color: #95a5a6; -fx-text-fill: white;"/>
            <Text text="â³ To be implemented" style="-fx-fill: #95a5a6; -fx-font-size: 9;"/>
        </VBox>

    </GridPane>

    <Separator/>

    <!-- Date Range Selection for Medical Supply Report -->
    <VBox fx:id="vboxDateRange" spacing="10" visible="false" managed="false"
          style="-fx-background-color: #ecf0f1; -fx-padding: 15; -fx-background-radius: 10;">

        <Text text="Medical Supply Report - Select Date Range"
              style="-fx-font-size: 14; -fx-font-weight: bold;"/>

        <HBox spacing="15" alignment="CENTER_LEFT">
            <Label text="From:" style="-fx-font-weight: bold;"/>
            <DatePicker fx:id="dateFrom" promptText="Start date"/>

            <Label text="To:" style="-fx-font-weight: bold;"/>
            <DatePicker fx:id="dateTo" promptText="End date"/>

            <Button text="ðŸ“Š Generate & Export" onAction="#handleGenerateMedicalSupplyReport"
                    style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-padding: 8 20; -fx-font-weight: bold;"/>
        </HBox>

        <Label fx:id="lblReportStatus" visible="false" style="-fx-font-weight: bold;"/>
    </VBox>

    <!-- Report Preview Area -->
    <VBox fx:id="vboxReportPreview" spacing="10" visible="false" managed="false">
        <Text text="Report Preview"
              style="-fx-font-size: 14; -fx-font-weight: bold;"/>

        <TableView fx:id="tableReportPreview" prefHeight="300">
            <!-- Columns will be added dynamically -->
        </TableView>

        <HBox spacing="10">
            <Button text="ðŸ“„ Export to CSV" onAction="#handleExportCSV"
                    style="-fx-background-color: #3498db; -fx-text-fill: white;"/>
            <Button text="ðŸ–¨ï¸ Print Report" onAction="#handlePrintReport"
                    style="-fx-background-color: #9b59b6; -fx-text-fill: white;"/>
        </HBox>
    </VBox>

</VBox>